<!DOCTYPE html>
<html>
  <head>
    <title>A New Chart</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
    google.charts.load('current', {packages: ['corechart']});
    google.charts.setOnLoadCallback(fetchMessageData);

    function drawChart(var msgData){
      //to be filled in later
      var book_data = new google.visualization.DataTable(msgData);
      //define columns for the DataTable instance
	//book_data.addColumn('string', 'Book Title');
	//book_data.addColumn('number', 'Votes');
            
//add data to book_data
	//book_data.addRows([
    //["The Best We Could Do", 6],
    //"Sing, Unburied, Sing", 10],
    //["The Book of Unknown Americans", 7],
    //["The 57 Bus", 4],
    //["The Handmaid's Tale", 8]
	//]);
	var chart = new google.visualization.BarChart(document.getElementById('book_chart'));		
	var chart_options = {title: 'Chart Project'};
		chart.draw(book_data, chart_options);
    }
function fetchMessageData() {
          fetch("/messagechart")
              .then((response) => {
                return response.json();
              })
              .then((msgJson) => {
                var msgData = new google.visualization.DataTable();
                //define columns for the DataTable instance
                msgData.addColumn('date', 'Date');
                msgData.addColumn('number', 'Message Count');
               
                for (i = 0; i < msgJson.length; i++) {
                    msgRow = [];
                    var timestampAsDate = new Date (msgJson[i].timestamp);
                    var totalMessages = i + 1;
                    //TODO add the formatted values to msgRow array by using JS' push method
               
                    //console.log(msgRow);
                    msgData.addRow(msgRow);
                }
                //console.log(msgData);
                drawChart(msgData);
                //var chart = new google.visualization.LineChart(document.getElementById('book_chart'));
				//var chart_options = {title: 'Chart Project'};
				//chart.draw(msgData, chart_options);
              });
        }
	</script>
  </head>
  <body onload="drawChart()">
  	<div id="book_chart" style="width: 900px; height: 500px;"></div>
    <h1>Chart Project</h1>
  </body>
</html>